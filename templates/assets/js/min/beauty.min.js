!function(){"use strict";function o(t){if(!(this instanceof o))return new o(t);this.options=Object.assign({},{followMode:!1,followTheme:!1,titlePrint:!1,titlePrintInterval:300,titleTiktok:!1,titleText:"来自小莫唐尼的Joe首页大图",titleColor:"#ffffff",titleShadow:"-3px 2px 6px #1c1f21",hitokotoParams:{},hitokotoApi:"https://v1.hitokoto.cn",hitokotoColor:"#ffffff",hitokotoEnable:!0},t),this.init()}o.prototype={dom:{bigBanner:null,waves:null,bannerTitle:null,bannerSubTitle:null,hitokotoText:null,hitokotoForm:null},_timer:{printText:null},fnGetDom(){this.dom.bigBanner=$("#EvanBigBanner"),this.dom.waves=$("#EvanWaves"),this.dom.bannerTitle=$("#EvanBigBanner_Title"),this.dom.bannerSubTitle=$("#EvanBigBanner_SubTitle"),this.dom.hitokotoText=$("#HitokotoText"),this.dom.hitokotoForm=$("#HitokotoForm")},fnSetStyle(){this.dom.waves.find(".parallax use").removeAttr("fill"),this.dom.bannerTitle.css({color:this.options.titleColor,textShadow:this.options.titleShadow}),this.options.titleTiktok&&this.dom.bannerTitle.addClass("evan-tiktok-text"),this.dom.hitokotoText.css({color:this.options.hitokotoColor}),this.dom.hitokotoForm.css({color:this.options.hitokotoColor}),this.options.followMode&&!this.options.wavesColor&&this.dom.waves.css("fill","var(--background)"),this.options.followTheme&&(this.options.wavesColor||this.dom.waves.css("fill","var(--theme)"),this.options.titleTiktok||this.dom.bannerTitle.css("color","var(--theme)"))},fnPrintText(){const t=this;if(t.options.titleTiktok)return;let o="",i="",e=(o=t.options.titleText||t.dom.bannerTitle.text(),0);const n=()=>{t._timer.printText=setTimeout(()=>{(i.length<o.length?(i+=o[e++],t.dom.bannerTitle.html(i+"_"),n):(clearTimeout(t._timer.printText),t.dom.bannerTitle.html(i+'<span id="EvanBigBannerLastTitleTip">_</span>'),l))()},t.options.titlePrintInterval)};n();let s=!0;const l=()=>{setTimeout(()=>{s?$("#EvanBigBannerLastTitleTip").css({visibility:"hidden"}):$("#EvanBigBannerLastTitleTip").css({visibility:"visible"}),s=!s,l()},t.options.titlePrintInterval)}},fnGetHitokoto(){var t,i=this,o=function(o){$.get(i.options.hitokotoApi,i.options.hitokotoParams,function(t){i.dom.hitokotoText.fadeIn(1500).html(t.hitokoto),i.dom.hitokotoForm.fadeIn(1500).html("「&nbsp;"+t.from+"&nbsp;」"),"function"==typeof o&&o()})};i.options.hitokotoEnable&&(clearTimeout(i.timer),t=function(){i.timer=setTimeout(function(){i.dom.hitokotoText.fadeOut(1500),i.dom.hitokotoForm.fadeOut(1500),setTimeout(function(){o(function(){t()})},1100)},6e3)},o(),t())},init(){var t=this;$(function(){t.fnGetDom(),t.fnGetHitokoto(),t.fnPrintText(),t.fnSetStyle(),t.options.titleText?t.dom.bannerTitle.text(t.options.titleText):t.dom.bannerSubTitle.css("opacity",1)})}},window.EvanBigBanner=o}();