const censusContext={system(){const d=e=>{var t;return e?(t=Math.floor(Math.log(e)/Math.log(1e3)),(e/Math.pow(1e3,t)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]):"0 B"},g=e=>e<1024?parseInt(e)+" MB":parseInt(e/1024)+" GB",h=[],p=[],y=[];var e=document.querySelector("#flow"),t=document.querySelector("#work");const f=e&&echarts.init(e),b=t&&echarts.init(t);e&&t&&!function u(){Utils.request({url:Joe.BASE_API,type:"POST",returnRaw:!0,data:{routeType:"server_status"}}).then(e=>{e.status||Qmsg.warning("服务器接口异常！");{$(".joe_census__server-item .count .core").html(e.cpu[1]+" 核"),$(".joe_census__server-item .count .ram").html(""+g(e.memory.memTotal)),$(".joe_census__server-item .count .up").html("总发送："+d(e.upTotal)),$(".joe_census__server-item .count .down").html("总接收："+d(e.downTotal));const t=new Date,o=String(t.getHours()).padStart(2,0),a=String(t.getMinutes()).padStart(2,0),l=String(t.getSeconds()).padStart(2,0),i=`${o}:${a}:`+l;h.push(i),p.push(e.up),y.push(e.down),5<h.length&&h.shift(),5<p.length&&p.shift(),5<y.length&&y.shift(),f.setOption({title:{subtext:"单位 KB/s"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},xAxis:{axisTick:{show:!1},type:"category",boundaryGap:!1,data:h},yAxis:{type:"value"},series:[{type:"line",name:"上行",smooth:!0,showSymbol:!1,itemStyle:{normal:{color:"#f39494",areaStyle:{color:"#f39494"},lineStyle:{width:2,color:"#f39494"}}},stack:"总量",data:p},{type:"line",name:"下行",smooth:!0,showSymbol:!1,itemStyle:{normal:{color:"#9dd3e8",areaStyle:{color:"#9dd3e8"},lineStyle:{width:2,color:"#9dd3e8"}}},stack:"总量",data:y}]})}{const r=e.cpu[0],s=Math.round(e.memory.memRealUsed/e.memory.memTotal*1e3)/10,n=Math.round(e.memory.memCached/e.memory.memTotal*1e3)/10,c=Math.round(e.memory.memBuffers/e.memory.memTotal*1e3)/10,m=100<Math.round(e.load.one/e.load.max*100)?100:Math.round(e.load.one/e.load.max*100);b.setOption({title:{subtext:"单位 百分比"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",axisTick:{show:!1},data:["CPU占用","内存占用","系统缓冲","内存缓冲","系统负载"]},yAxis:{type:"value",max:100},series:{data:[{name:"CPU占用",value:r,itemStyle:{color:"#b3c25a"}},{name:"内存占用",value:s,itemStyle:{color:"#67b580"}},{name:"系统缓冲",value:c,itemStyle:{color:"#86ba71"}},{name:"内存缓冲",value:n,itemStyle:{color:"#feb041"}},{name:"系统负载",value:m,itemStyle:{color:"#fd7e55"}}],type:"bar",showBackground:!0,label:{show:!0,color:"#ffffff",formatter:e=>e.data.value+"%"},backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}})}setTimeout(u,2e3)}).catch(e=>{console.log(e)})}()},category(){var e=document.querySelector("#category"),e=echarts.init(e);const o=[];$(".joe_census__basic-item.category ul li").each((e,t)=>{o.push({name:t.getAttribute("data-name"),value:t.getAttribute("data-value")})}),e.setOption({tooltip:{trigger:"item"},series:[{type:"pie",roseType:"area",itemStyle:{borderRadius:8},data:o}]})},comment(){var e=document.querySelector("#lately");const t=echarts.init(e);Utils.request({url:Joe.BASE_API,type:"POST",returnRaw:!0,data:{routeType:"comment_lately"}}).then(e=>{t.setOption({title:{subtext:"单位 数量"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",axisTick:{show:!1},data:e.categories},yAxis:{type:"value"},series:{name:"数量",itemStyle:{normal:{color:"#91cc75",lineStyle:{width:2,color:"#91cc75"}}},data:e.series,type:"line",smooth:!0}})}).catch(e=>{console.log(e)})},archive(){let e=0;function t(){"loading..."!==$(".joe_census__filing .button").html()&&Utils.request({url:Joe.BASE_API,type:"POST",returnRaw:!0,data:{routeType:"article_filing",page:++e}}).then(e=>{if(!e.length)return $(".joe_census__filing .item.load").remove(),Qmsg.warning("没有更多内容了");let t="";e.forEach(e=>{t+=`
							<div class="item">
								<div class="tail"></div>
								<div class="head"></div>
								<div class="wrapper">
									<div class="panel">${e.date}<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M21.6 772.8c28.8 28.8 74.4 28.8 103.2 0L512 385.6l387.2 387.2c28.8 28.8 74.4 28.8 103.2 0 28.8-28.8 28.8-74.4 0-103.2L615.2 282.4l-77.6-77.6c-14.4-14.4-37.6-14.4-51.2 0l-77.6 77.6L21.6 669.6c-28.8 28.8-28.8 75.2 0 103.2z" /></svg></div>
									<ol class="panel-body">
										${e.list.map(e=>`<li><a rel="noopener noreferrer" target="_blank" href="${e.permalink}">${e.title}</a></li>`).join("")}
									</ol>
								</div>
							</div>
						`}),$("#filing").append(t),$(".joe_census__filing .button").html("加载更多")}).catch(e=>{console.log(e)})}t(),$(".joe_census__filing .content").on("click",".panel",function(){var e=$(this).parents(".content");e.find(".panel").not($(this)).removeClass("in"),e.find(".panel-body").not($(this).siblings(".panel-body")).stop().hide("fast"),$(this).toggleClass("in").siblings(".panel-body").stop().toggle("fast")}),$(".joe_census__filing .button").on("click",function(){t(),$(this).html("loading...")})}};